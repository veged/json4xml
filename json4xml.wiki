== Соглашение об отображении JSON в XML

Основная задача соглашения, облегчить набор xml-я внутри js-исходников.
Поэтому допускаются некоторые неоднозначности (есть несколько способов записать одно и тоже),
решаемые лично программистом в процессе набора кода.

Существующие соглашения (например BadgerFish и Rayfish) преследуют немного другую цель,
однозначного отображения xml-я в json. Поэтому допускается некоторая избыточность,
неудобная для ручного набора.


=== Элемент

Массив из 2-х или 3-х элементов. На первом месте строка с именем,
на втором (если всего 3 элемента) хеш атрибутов,
на третьем (или на 2-м, если всего 2 элемента) значение.

Атрибуты -- необязательный элемент. Значение -- обязательный элемент.

==== Примеры

%%%hl js
['item', 'text'] // <item>text</item>
['item', {attr: 'bla'}, 'text'] // <item attr="bla">text</item>
['', 'text'] // text
['item', ''] // <item></item>
%%%

=== Значение

Простой тип, элемент, хеш элементов или массив элементов.

=== Хеш элементов

В качестве ключа имя элемента, в качестве значения простой тип, хеш элементов, элемент-без-имени,
массив элементов-без-имени, элемент или массив элементов.

Используется когда не важен порядок элементов, элементы уникальные и нужен доступ по ключу.

==== Примеры

%%%hl js
{item1: 'text'} // <item1>text</item1>
{item1: [{attr: 'bla'}, 'text']} // <item1 attr="bla">text</item1>
{item: {subitem: 'text'}} // <item><subitem>text<subitem></item>
{item1: [[{attr: 1}, ''], [{attr: 2}, '']]} // <item1 attr="1"></item1><item1 attr="2"></item1>
{item1: [[{subitem: 1}], [{subitem: 2}]]} // <item1><subitem>1</subitem></item1><item1><subitem>2</subitem></item1>
{item: ['subitem', 'text']} // <item><subitem>text</subitem></item>
{item: [['subitem1', 'text1'], ['subitem2', 'text2']]} // <item><subitem1>text1</subitem1><subitem2>text2</subitem2></item>
%%%

=== Массив элементов
Отличается от элемента (который тоже массив) тем, что на первой позиции у него массив (элемент),
в то время как у элемента -- строка.
Используется когда важен порядок элементов.

==== Примеры

%%%hl js
[['subitem1', 'text1'], ['subitem2', 'text2']] // <subitem1>text1</subitem1><subitem2>text2</subitem2>
%%%

=== Общие примеры

%%%hl js
var x1 = ['item', {attr1: '1', attr2: 'bla'}, 'text1'];
var x2 = ['item', 'text2'];
var x3 = [x1, x2];
var x4 = ['items', {
   item1: 'text1',
   item2: [{attr: 1}, 'item2'],
   subitems: [
      ['subitem', {attr: true}, 'content1'],
      ['subitem', {attr: false}, 'content2']
   ]
}];
%%%
